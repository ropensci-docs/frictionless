<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="frictionless">
<title>Introduction to frictionless • frictionless</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to frictionless">
<meta property="og:description" content="frictionless">
<meta property="og:image" content="https://docs.ropensci.org/frictionless/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">frictionless</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="active nav-item">
  <a class="nav-link" href="../articles/frictionless.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/frictionlessdata/frictionless-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to frictionless</h1>
                        <h4 data-toc-skip class="author">Peter Desmet</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/frictionlessdata/frictionless-r/blob/HEAD/vignettes/frictionless.Rmd" class="external-link"><code>vignettes/frictionless.Rmd</code></a></small>
      <div class="d-none name"><code>frictionless.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-a-data-package">What is a Data Package?<a class="anchor" aria-label="anchor" href="#what-is-a-data-package"></a>
</h2>
<p>A <a href="https://specs.frictionlessdata.io/data-package/" class="external-link">Data Package</a> is a simple container format to describe and package a collection of (tabular) data. It is typically used to publish FAIR and open datasets. In this tutorial we will show you how to read, create, edit and write Data Packages with the <strong>R pkg frictionless</strong>.</p>
<p><strong>package</strong> vs <strong>pkg</strong>: in the Frictionless Data community <code>package</code> refers to a Data Package, while in R that is a software package. In this tutorial we will use <code>pkg</code> to refer to the latter.</p>
</div>
<div class="section level2">
<h2 id="read-a-data-package">Read a Data Package<a class="anchor" aria-label="anchor" href="#read-a-data-package"></a>
</h2>
<p>Load the frictionless pkg with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/frictionlessdata/frictionless-r" class="external-link">frictionless</a></span><span class="op">)</span></span></code></pre></div>
<p>To read a Data Package, you need to know the path or URL to its descriptor file, named <code>datapackage.json</code>. That file describes the Data Package, provides access points to its Data Resources and can contain dataset-level metadata. Let’s read a Data Package descriptor file published on <a href="https://doi.org/10.5281/zenodo.10053702" class="external-link">Zenodo</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">package</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_package.html">read_package</a></span><span class="op">(</span><span class="st">"https://zenodo.org/records/10053702/files/datapackage.json"</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/read_package.html">read_package()</a></code> returns the content of <code>datapackage.json</code> as a list with class <code>datapackage</code>. When printing a Data Package, you get a summary of its contents:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">package</span></span>
<span><span class="co">#&gt; A Data Package with 3 resources:</span></span>
<span><span class="co">#&gt; • reference-data</span></span>
<span><span class="co">#&gt; • gps</span></span>
<span><span class="co">#&gt; • acceleration</span></span>
<span><span class="co">#&gt; For more information, see &lt;https://doi.org/10.5281/zenodo.10053702&gt;.</span></span>
<span><span class="co">#&gt; Use `unclass()` to print the Data Package as a list.</span></span></code></pre></div>
<p>Since a Data Package is a list, you can pass it to functions that work on lists, such as <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">package</span>, list.len <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ id       : chr "https://doi.org/10.5281/zenodo.10053702"</span></span>
<span><span class="co">#&gt;  $ profile  : chr "tabular-data-package"</span></span>
<span><span class="co">#&gt;  $ resources:List of 3</span></span>
<span><span class="co">#&gt;   ..$ :List of 7</span></span>
<span><span class="co">#&gt;   .. ..$ name     : chr "reference-data"</span></span>
<span><span class="co">#&gt;   .. ..$ path     : chr "O_WESTERSCHELDE-reference-data.csv"</span></span>
<span><span class="co">#&gt;   .. ..$ profile  : chr "tabular-data-resource"</span></span>
<span><span class="co">#&gt;   .. .. [list output truncated]</span></span>
<span><span class="co">#&gt;   ..$ :List of 7</span></span>
<span><span class="co">#&gt;   .. ..$ name     : chr "gps"</span></span>
<span><span class="co">#&gt;   .. ..$ path     : chr [1:3] "O_WESTERSCHELDE-gps-2018.csv.gz" "O_WESTERSCHELDE-gps-2019.csv.gz" "O_WESTERSCHELDE-gps-2020.csv.gz"</span></span>
<span><span class="co">#&gt;   .. ..$ profile  : chr "tabular-data-resource"</span></span>
<span><span class="co">#&gt;   .. .. [list output truncated]</span></span>
<span><span class="co">#&gt;   ..$ :List of 7</span></span>
<span><span class="co">#&gt;   .. ..$ name     : chr "acceleration"</span></span>
<span><span class="co">#&gt;   .. ..$ path     : chr [1:3] "O_WESTERSCHELDE-acceleration-2018.csv.gz" "O_WESTERSCHELDE-acceleration-2019.csv.gz" "O_WESTERSCHELDE-acceleration-2020.csv.gz"</span></span>
<span><span class="co">#&gt;   .. ..$ profile  : chr "tabular-data-resource"</span></span>
<span><span class="co">#&gt;   .. .. [list output truncated]</span></span>
<span><span class="co">#&gt;   [list output truncated]</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "datapackage" "list"</span></span></code></pre></div>
<p>The most important aspect of a Data Package are its <strong>Data Resources</strong>, which describe and point to the data. You can list all included resources with <code><a href="../reference/resources.html">resources()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/resources.html">resources</a></span><span class="op">(</span><span class="va">package</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "reference-data" "gps"            "acceleration"</span></span></code></pre></div>
<p>This Data Package has 3 resources. Let’s read the data from the <code>gps</code> resource into a data frame:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_resource.html">read_resource</a></span><span class="op">(</span><span class="va">package</span>, <span class="st">"gps"</span><span class="op">)</span></span>
<span><span class="va">gps</span></span>
<span><span class="co">#&gt; # A tibble: 73,047 × 21</span></span>
<span><span class="co">#&gt;     `event-id` visible timestamp           `location-long` `location-lat`</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;lgl&gt;   &lt;dttm&gt;                        &lt;dbl&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 14256075762 TRUE    2018-05-25 16:11:37            4.25           51.3</span></span>
<span><span class="co">#&gt;  2 14256075763 TRUE    2018-05-25 16:16:41            4.25           51.3</span></span>
<span><span class="co">#&gt;  3 14256075764 TRUE    2018-05-25 16:21:29            4.25           51.3</span></span>
<span><span class="co">#&gt;  4 14256075765 TRUE    2018-05-25 16:26:28            4.25           51.3</span></span>
<span><span class="co">#&gt;  5 14256075766 TRUE    2018-05-25 16:31:21            4.25           51.3</span></span>
<span><span class="co">#&gt;  6 14256075767 TRUE    2018-05-25 16:36:09            4.25           51.3</span></span>
<span><span class="co">#&gt;  7 14256075768 TRUE    2018-05-25 16:40:57            4.25           51.3</span></span>
<span><span class="co">#&gt;  8 14256075769 TRUE    2018-05-25 16:45:55            4.25           51.3</span></span>
<span><span class="co">#&gt;  9 14256075770 TRUE    2018-05-25 16:50:49            4.25           51.3</span></span>
<span><span class="co">#&gt; 10 14256075771 TRUE    2018-05-25 16:55:36            4.25           51.3</span></span>
<span><span class="co">#&gt; # ℹ 73,037 more rows</span></span>
<span><span class="co">#&gt; # ℹ 16 more variables: `bar:barometric-pressure` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `external-temperature` &lt;dbl&gt;, `gps:dop` &lt;dbl&gt;, `gps:satellite-count` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `gps-time-to-fix` &lt;dbl&gt;, `ground-speed` &lt;dbl&gt;, heading &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `height-above-msl` &lt;dbl&gt;, `location-error-numerical` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `manually-marked-outlier` &lt;lgl&gt;, `vertical-error-numerical` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `sensor-type` &lt;chr&gt;, `individual-taxon-canonical-name` &lt;chr&gt;, …</span></span></code></pre></div>
<p>The data frame contains all GPS records, even though the actual data were split over <a href="https://zenodo.org/records/10053702#files-heading" class="external-link">multiple CSV zipped files</a>. <code><a href="../reference/read_resource.html">read_resource()</a></code> assigned the column names and types based on the Table Schema that was defined for that resource, not the headers of the CSV file.</p>
<p>You can also read data from a local (e.g. downloaded) Data Package. In fact, there is one included in the frictionless pkg, let’s read that one from disk:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">local_package</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_package.html">read_package</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"datapackage.json"</span>, package <span class="op">=</span> <span class="st">"frictionless"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">local_package</span></span>
<span><span class="co">#&gt; A Data Package with 3 resources:</span></span>
<span><span class="co">#&gt; • deployments</span></span>
<span><span class="co">#&gt; • observations</span></span>
<span><span class="co">#&gt; • media</span></span>
<span><span class="co">#&gt; Use `unclass()` to print the Data Package as a list.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/read_resource.html">read_resource</a></span><span class="op">(</span><span class="va">local_package</span>, <span class="st">"media"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   media_id                      deployment_id observation_id timestamp file_path</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                         &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;    </span></span>
<span><span class="co">#&gt; 1 aed5fa71-3ed4-4284-a6ba-3550… 1             1-1            2020-09-… https://…</span></span>
<span><span class="co">#&gt; 2 da81a501-8236-4cbd-aa95-4bc4… 1             1-1            2020-09-… https://…</span></span>
<span><span class="co">#&gt; 3 0ba57608-3cf1-49d6-a5a2-fe68… 1             1-1            2020-09-… https://…</span></span></code></pre></div>
<p>Data from the <code>media</code> was not stored in a CSV file, but directly in the <code>data</code> property of that resource in <code>datapackage.json</code>. <code><a href="../reference/read_resource.html">read_resource()</a></code> will automatically detect where to read data from.</p>
</div>
<div class="section level2">
<h2 id="create-and-edit-a-data-package">Create and edit a Data Package<a class="anchor" aria-label="anchor" href="#create-and-edit-a-data-package"></a>
</h2>
<p>Data Package is a good format to technically describe your data, e.g. if you are planning to deposit it on research repository. It also goes a long way meeting <a href="https://www.go-fair.org/fair-principles/" class="external-link">FAIR principles</a>.</p>
<p>The frictionless pkg assumes your data are stored as a data frame or CSV files. Let’s use the built-in dataset <code>iris</code> as your data frame:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show content of the data frame "iris"</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 150 × 5</span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></span>
<span><span class="co">#&gt;  1          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt;  2          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt;  3          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt;  4          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt;  5          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt;  6          5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt;  7          4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt;  8          5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt;  9          4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; 10          4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; # ℹ 140 more rows</span></span></code></pre></div>
<p>Create a Data Package with <code><a href="../reference/create_package.html">create_package()</a></code> and add your data frame as a resource with the name <code>iris</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load dplyr or magrittr to support %&gt;% pipes</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># or library(magrittr)</span></span>
<span></span>
<span><span class="va">my_package</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/create_package.html">create_package</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_resource.html">add_resource</a></span><span class="op">(</span>resource_name <span class="op">=</span> <span class="st">"iris"</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<p>Note that you can chain most frictionless functions together using pipes (<code>%&gt;%</code> or <code>|&gt;</code>), which improves readability.</p>
<p><code>my_package</code> now contains one resource:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_package</span></span>
<span><span class="co">#&gt; A Data Package with 1 resource:</span></span>
<span><span class="co">#&gt; • iris</span></span>
<span><span class="co">#&gt; Use `unclass()` to print the Data Package as a list.</span></span></code></pre></div>
<p>By default, <code><a href="../reference/add_resource.html">add_resource()</a></code> will create a <strong>Table Schema</strong> for your data frame, describing its field names, field types and (for factors) constraints. You can retrieve the schema of a resource with <code><a href="../reference/get_schema.html">get_schema()</a></code>. It is a list, which we print here using <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_schema</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">my_package</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/get_schema.html">get_schema</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ fields:List of 5</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Sepal.Length"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Sepal.Width"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Petal.Length"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Petal.Width"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Species"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "string"</span></span>
<span><span class="co">#&gt;   .. ..$ constraints:List of 1</span></span>
<span><span class="co">#&gt;   .. .. ..$ enum: chr [1:3] "setosa" "versicolor" "virginica"</span></span></code></pre></div>
<p>You can also create a schema from a data frame, using <code><a href="../reference/create_schema.html">create_schema()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_schema.html">create_schema</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ fields:List of 5</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Sepal.Length"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Sepal.Width"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Petal.Length"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ name: chr "Petal.Width"</span></span>
<span><span class="co">#&gt;   .. ..$ type: chr "number"</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Species"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "string"</span></span>
<span><span class="co">#&gt;   .. ..$ constraints:List of 1</span></span>
<span><span class="co">#&gt;   .. .. ..$ enum: chr [1:3] "setosa" "versicolor" "virginica"</span></span></code></pre></div>
<p>Doing so allows you to customize the schema before adding the resource. E.g. let’s add a description for <code>Sepal.Length</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"Sepal length in cm."</span></span>
<span><span class="co"># Show result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ name       : chr "Sepal.Length"</span></span>
<span><span class="co">#&gt;  $ type       : chr "number"</span></span>
<span><span class="co">#&gt;  $ description: chr "Sepal length in cm."</span></span></code></pre></div>
<p>Since schema is a list, you can use the <code>purrr</code> pkg to edit multiple elements at once:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove description for first field</span></span>
<span><span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># Set descriptions for all fields</span></span>
<span><span class="va">descriptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Sepal length in cm."</span>,</span>
<span>  <span class="st">"Sepal width in cm."</span>,</span>
<span>  <span class="st">"Pedal length in cm."</span>,</span>
<span>  <span class="st">"Pedal width in cm."</span>,</span>
<span>  <span class="st">"Iris species."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap</a></span><span class="op">(</span></span>
<span>  <span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span>,</span>
<span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">.x</span>, description <span class="op">=</span> <span class="va">descriptions</span><span class="op">[</span><span class="va">.y</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ fields:List of 5</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Sepal.Length"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "number"</span></span>
<span><span class="co">#&gt;   .. ..$ description: chr "Sepal length in cm."</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Sepal.Width"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "number"</span></span>
<span><span class="co">#&gt;   .. ..$ description: chr "Sepal width in cm."</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Petal.Length"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "number"</span></span>
<span><span class="co">#&gt;   .. ..$ description: chr "Pedal length in cm."</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Petal.Width"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "number"</span></span>
<span><span class="co">#&gt;   .. ..$ description: chr "Pedal width in cm."</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   .. ..$ name       : chr "Species"</span></span>
<span><span class="co">#&gt;   .. ..$ type       : chr "string"</span></span>
<span><span class="co">#&gt;   .. ..$ constraints:List of 1</span></span>
<span><span class="co">#&gt;   .. .. ..$ enum: chr [1:3] "setosa" "versicolor" "virginica"</span></span>
<span><span class="co">#&gt;   .. ..$ description: chr "Iris species."</span></span></code></pre></div>
<p>Let’s add <code>iris</code> as a resource to your Data Package again, but this time with the customized schema. Let’s also add <code>title</code> and <code>description</code> as a metadata properties. Note that you have to remove the originally added resource <code>iris</code> with <code><a href="../reference/remove_resource.html">remove_resource()</a></code> first, since Data Packages can only contain uniquely named resources:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_package</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">my_package</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/remove_resource.html">remove_resource</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Remove originally added resource</span></span>
<span>  <span class="fu"><a href="../reference/add_resource.html">add_resource</a></span><span class="op">(</span></span>
<span>    resource_name <span class="op">=</span> <span class="st">"iris"</span>,</span>
<span>    data <span class="op">=</span> <span class="va">iris</span>,</span>
<span>    schema <span class="op">=</span> <span class="va">iris_schema</span>, <span class="co"># Your customized schema</span></span>
<span>    title <span class="op">=</span> <span class="st">"Iris dataset"</span>, <span class="co"># Your additional metadata</span></span>
<span>    description <span class="op">=</span> <span class="st">"The built-in dataset in R."</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>If you already have your data stored as CSV files and you want to include them <em>as is</em> as a Data Resource, you can do so as well. As with data frames, you can opt to create a Table Schema automatically or provide your own.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two CSV files with the same structure</span></span>
<span><span class="va">path_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"observations_1.csv"</span>, package <span class="op">=</span> <span class="st">"frictionless"</span><span class="op">)</span></span>
<span><span class="va">path_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"observations_2.csv"</span>, package <span class="op">=</span> <span class="st">"frictionless"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add both CSV files as a single resource</span></span>
<span><span class="va">my_package</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">my_package</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_resource.html">add_resource</a></span><span class="op">(</span>resource_name <span class="op">=</span> <span class="st">"observations"</span>, data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">path_1</span>, <span class="va">path_2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Your Data Package now contains 2 resources, but you can add metadata properties as well (see the <a href="https://specs.frictionlessdata.io/data-package/#metadata" class="external-link">Data Package documentation</a> for an overview). Since it is a list, you can use <code><a href="https://rdrr.io/r/base/append.html" class="external-link">append()</a></code> to insert properties at the desired place. Let’s add <code>name</code> as first and <code>title</code> as second property:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_package</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">my_package</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"my_package"</span><span class="op">)</span>, after <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">my_package</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">my_package</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"My package"</span><span class="op">)</span>, after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Warning: append() drops the custom datapackage class.</span></span>
<span><span class="co"># It can be added again by running my_package through create_package()</span></span>
<span><span class="va">my_package</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_package.html">create_package</a></span><span class="op">(</span><span class="va">my_package</span><span class="op">)</span></span></code></pre></div>
<p>Note that in the above steps you started a Data Package from scratch with <code><a href="../reference/create_package.html">create_package()</a></code>, but you can use the same functionality to edit an existing Data Package read with <code><a href="../reference/read_package.html">read_package()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="write-a-data-package">Write a Data Package<a class="anchor" aria-label="anchor" href="#write-a-data-package"></a>
</h2>
<p>Now that you have created your Data Package, you can write it to a directory of your choice with <code><a href="../reference/write_package.html">write_package()</a></code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_package.html">write_package</a></span><span class="op">(</span><span class="va">my_package</span>, <span class="st">"my_directory"</span><span class="op">)</span></span></code></pre></div>
<p>The directory will contain four files: the descriptor <code>datapackage.json</code>, one CSV file containing the data for the resource <code>iris</code> and two CSV files containing the data for the resource <code>observations</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"my_directory"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "datapackage.json"   "iris.csv"           "observations_1.csv" "observations_2.csv"</span></span></code></pre></div>
<p>The frictionless pkg does not provide functionality to deposit your Data Package on a research repository such as <a href="https://zenodo.org" class="external-link">Zenodo</a>, but here are some tips:</p>
<ol style="list-style-type: decimal">
<li>Validate your Data Package before depositing. You can do this in Python with the <a href="https://github.com/frictionlessdata/frictionless-py" class="external-link">Frictionless Framework</a> using <code>frictionless validate datapackage.json</code>.</li>
<li>Use <code>compress = TRUE</code> in <code><a href="../reference/write_package.html">write_package()</a></code> to reduce the size of the deposit. It will zip the individual CSV files, not the entire Data Package. That way, users still have direct access to the <code>datapackage.json</code> file. See <a href="https://zenodo.org/records/10053702#files-heading" class="external-link">this example</a>.</li>
<li>Only describe the technical aspects of your dataset in <code>datapackage.json</code> (fields, units, the dataset identifier in <code>id</code>). Authors, methodology, license, etc. are better described in the metadata fields the research repository provides.</li>
</ol>
<p>We also recommend having a look at the rOpenSci <a href="https://docs.ropensci.org/deposits/" class="external-link"><code>deposits</code></a> pkg, which provides a universal inferface to deposit and access data in a research repository. It uses the frictionless pkg under the hood.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
